<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Resources — HRS Edu Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <div class="container top-inner">
      <a href="index.html" class="brand"><img src="assets/logo.svg" class="brand-logo"/> HRS Edu Hub</a>
      <nav class="navlinks">
        <a href="about.html">About</a>
        <a href="index.html" id="loginLink">Login</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero small">
      <div class="hero-inner">
        <div>
          <h1 id="welcome">Study Resources</h1>
          <p class="muted">Notes, textbooks (PDF), and video lessons — all in one place.</p>
        </div>
        <div class="cta">
          <a class="btn" href="#notes">Notes</a>
          <a class="btn" href="#textbooks">Textbooks</a>
          <a class="btn primary" href="#youtube">YouTube</a>
        </div>
      </div>
    </section>

    <div id="userBar" class="card" style="margin:16px 0; display:none;">
      <div id="userInfo"></div>
      <div style="margin-top:8px;">
        <button class="btn" id="profileBtn">My Profile</button>
        <button class="btn" id="logoutBtn">Logout</button>
      </div>
    </div>

    <section id="notes" class="section">
      <div class="section-head">
        <h2>Notes & Handouts</h2>
        <div class="filters">
          <input id="searchInput" type="search" placeholder="Search subject, unit, keyword..." />
          <select id="semesterFilter">
            <option value="">All Semesters</option>
            <option>Sem 1</option>
            <option>Sem 2</option>
            <option>Sem 3</option>
            <option>Sem 4</option>
            <option>Sem 5</option>
            <option>Sem 6</option>
          </select>
        </div>
      </div>
      <div id="notesGrid" class="grid"></div>
    </section>

    <section id="textbooks" class="section alt">
      <div class="section-head"><h2>Textbooks & PDFs</h2></div>
      <div id="booksGrid" class="grid"></div>
    </section>

    <section id="youtube" class="section">
      <div class="section-head">
        <h2>YouTube Lessons</h2>
        <a id="channelLink" class="btn" target="_blank" rel="noopener">Visit Channel</a>
      </div>
      <div id="videoGrid" class="grid video-grid"></div>
    </section>

    <section id="support" class="section alt">
      <h2>Support</h2>
      <div class="support-row">
        <div>
          <label>UPI ID</label>
          <div class="input-row"><input id="upiIdInput" value="your-upi-id@oksbi"><button class="btn" id="copyUpiBtn">Copy</button></div>
        </div>
        <div>
          <label>Scan QR</label>
          <div class="qr-card"><img src="assets/upi-qr.svg" alt="QR"></div>
        </div>
      </div>
    </section>

  </main>

  <footer class="footer">
    <div class="container foot-inner">© <span id="year"></span> HRS Edu Hub • Built on GitHub Pages</div>
  </footer>

  <script type="module">
    import { onAuthChange, logoutFirebase, getProfile } from './auth-firebase.js';
    import './script.js';

    const loginLink = document.getElementById('loginLink');
    const userBar = document.getElementById('userBar');
    const userInfo = document.getElementById('userInfo');
    const profileBtn = document.getElementById('profileBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const welcome = document.getElementById('welcome');

    onAuthChange(async (user)=>{
      if(user){
        loginLink.textContent = 'My Account';
        userBar.style.display = 'block';
        const profile = await getProfile(user.uid);
        userInfo.innerHTML = `<strong>${profile?.name || user.email}</strong><div class="muted">${user.email}</div>`;
        welcome.textContent = `Welcome, ${profile?.name || user.email.split('@')[0]}`;
      } else {
        loginLink.textContent = 'Login';
        userBar.style.display = 'none';
        welcome.textContent = 'Study Resources';
      }
    });

    profileBtn.addEventListener('click', ()=>{ window.location.href='profile.html'; });
    logoutBtn.addEventListener('click', async ()=>{ await logoutFirebase(); window.location.href='index.html'; });

    // copy upi
    document.getElementById('copyUpiBtn').addEventListener('click', ()=>{
      navigator.clipboard.writeText(document.getElementById('upiIdInput').value);
      const b = document.getElementById('copyUpiBtn'); b.textContent='Copied!'; setTimeout(()=>b.textContent='Copy',1200);
    });

  </script>

  <script>document.getElementById('year').textContent=new Date().getFullYear();</script>
</body>
</html>
